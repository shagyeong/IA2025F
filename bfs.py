import numpy as np
import cv2
import collections
import time # ì‹œê°„ ì¸¡ì •ì„ ìœ„í•œ time ëª¨ë“ˆ ì¶”ê°€

# --- ìƒ‰ìƒ ì„¸íŒ… ---
YEL = (0, 255, 255)  # yellow (ë²½)
PUR = (153, 0, 102)  # purple (ê¸¸)
RED = (0, 0, 255)    # red (ì‹œì‘, ë, ê²½ë¡œ)

# --- ë§µ ì›ë³¸ (60x60) ---
l = [
    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    [1,"S",0,1,1,0,0,0,1,1,1,1,1,1,1,0,1,1,1,0,1,0,0,1,1,0,1,1,1,0,0,0,0,1,0,1,1,0,0,0,1,0,1,1,1,1,1,1,1,0,1,1,1,1,0,0,0,1,0,1],
    [1,1,0,0,0,1,0,0,0,1,1,1,1,1,0,0,1,0,1,0,1,1,1,1,1,1,0,1,1,0,1,1,1,1,0,0,1,1,1,0,1,0,0,1,0,0,1,1,0,1,1,1,0,0,1,1,1,0,0,1],
    [1,1,0,0,1,0,1,0,1,1,1,1,0,0,0,1,1,0,0,1,1,1,0,0,1,1,1,1,0,1,1,1,0,1,1,0,0,1,1,1,1,1,1,1,1,1,0,1,0,0,1,1,0,1,1,0,1,1,0,1],
    [1,0,0,0,0,1,1,0,0,0,1,1,1,0,1,1,1,1,1,1,0,1,0,1,1,0,0,0,0,0,1,1,1,1,1,1,0,1,0,1,1,0,0,1,0,1,1,0,1,1,0,1,1,1,0,1,0,1,1,1],
    [1,1,0,0,0,0,1,1,0,1,1,1,0,1,0,1,1,0,1,1,0,1,1,0,0,1,1,1,0,0,0,1,1,0,0,0,0,0,1,0,1,0,0,1,1,1,1,1,0,0,1,0,1,1,0,0,1,1,1,1],
    [1,1,0,0,1,0,1,1,1,1,0,0,1,0,1,1,1,1,0,0,0,0,1,1,1,0,0,1,0,1,0,0,0,0,0,1,0,1,0,0,0,0,1,0,1,0,0,1,0,1,1,0,1,1,1,1,0,0,1,1],
    [1,0,0,0,1,0,1,0,1,0,1,1,1,0,1,0,1,1,1,1,0,1,0,1,0,0,0,1,1,0,1,1,0,0,1,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,0,1,1,1,1,0,0,1,1],
    [1,0,1,0,0,0,0,0,1,1,1,1,1,0,1,1,0,1,0,1,1,0,1,0,0,1,1,1,0,1,1,1,0,1,0,0,0,1,0,0,0,0,1,0,1,0,0,1,1,1,0,0,1,0,1,1,1,1,1,1],
    [1,0,0,0,0,0,0,0,1,1,1,1,0,1,0,0,0,1,1,1,0,0,0,1,0,1,0,1,1,1,1,1,0,1,1,1,1,0,1,1,1,1,0,1,1,1,1,1,1,0,1,0,0,1,1,1,1,0,1,1],
    [1,0,0,0,0,0,0,0,0,1,0,1,1,0,0,1,0,0,1,0,0,1,1,1,0,0,1,0,1,0,0,1,0,0,0,1,0,0,1,1,1,1,1,0,0,1,0,0,0,0,1,0,0,1,0,1,1,1,0,1],
    [1,1,0,0,0,0,0,0,0,1,1,0,1,1,0,1,0,0,1,1,0,1,0,1,0,0,0,1,0,1,1,0,1,1,1,1,1,0,1,0,1,1,1,1,1,1,0,1,1,1,0,0,1,1,1,1,1,1,1,1],
    [1,1,1,0,1,0,0,0,0,0,1,1,1,1,1,0,1,0,1,1,0,1,1,1,1,0,1,0,0,0,1,1,1,1,0,0,1,0,0,0,0,1,1,0,1,1,1,1,1,1,1,1,0,0,1,0,0,0,0,1],
    [1,0,0,1,1,0,0,0,0,1,1,0,1,1,1,0,0,0,1,1,1,1,1,1,1,1,0,0,1,0,0,0,1,1,0,1,0,0,1,1,0,1,1,1,1,0,0,1,0,1,0,0,1,1,1,1,0,1,1,1],
    [1,0,0,1,1,1,1,0,0,0,1,1,0,1,0,1,0,0,1,1,1,1,1,0,0,1,1,0,1,0,1,1,0,0,1,1,1,0,1,0,0,1,0,1,0,1,0,1,1,1,0,1,1,1,1,1,1,1,1,1],
    [1,1,0,1,1,0,1,0,0,0,1,0,0,0,1,1,1,1,0,0,1,1,1,0,1,0,1,1,0,1,0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,1,1,0,0,1,0,0,1,0,1,1,1,1,1],
    [1,1,0,1,1,0,0,1,0,0,0,0,0,0,0,0,0,0,1,1,1,0,1,1,0,1,1,1,1,1,1,0,1,0,0,1,1,0,0,1,0,1,0,1,0,0,1,0,0,0,0,0,0,0,0,0,1,1,1,1],
    [1,0,1,1,0,1,1,1,0,1,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,1,1,1,0,0,1,0,0,1,1,1,0,1,0,1,1,0,0,1,1,1,0,1,1,1,0,1,1,0,0,1],
    [1,0,1,0,1,1,1,1,1,0,1,1,1,0,0,1,0,1,0,0,0,0,1,0,1,0,0,1,1,0,1,1,1,1,0,1,1,0,1,1,0,1,0,1,1,1,1,0,1,1,0,1,1,1,1,0,1,0,1,1],
    [1,0,1,1,1,0,1,0,0,1,1,0,1,1,1,0,1,0,1,1,0,0,1,0,1,1,0,1,1,0,1,0,0,0,0,0,1,1,1,1,1,1,1,1,0,1,1,0,1,0,1,1,0,0,1,1,1,1,1,1],
    [1,1,0,0,0,0,0,0,1,1,1,0,1,1,0,1,0,1,0,0,0,0,0,0,1,0,0,1,1,0,1,1,1,0,1,1,1,0,1,0,1,1,1,1,0,0,1,1,1,1,0,0,1,0,1,1,1,0,1,1],
    [1,1,1,0,1,0,1,1,1,1,1,1,1,1,1,1,0,1,1,0,0,0,0,1,0,1,1,0,0,1,1,0,1,1,1,1,0,0,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,0,0,0,1,1],
    [1,1,1,0,0,0,1,0,1,0,0,1,0,1,0,0,0,0,1,1,0,0,0,0,1,1,1,1,0,1,0,0,0,1,1,1,0,0,1,0,0,1,1,1,1,1,0,1,0,1,1,1,1,1,1,1,1,1,1,1],
    [1,1,1,0,0,1,1,0,1,0,0,0,0,1,1,1,1,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,1,1,1,1,0,1,0,0,0,1,1,0,1,1,1,0,0,0,1,1,1,1],
    [1,0,1,1,1,0,1,1,1,0,1,0,1,0,0,1,1,1,1,0,0,0,0,0,0,0,1,1,0,0,1,0,1,0,1,1,0,1,1,1,1,1,1,1,0,1,1,0,0,0,0,1,1,0,0,1,0,1,1,1],
    [1,1,1,0,1,0,1,1,1,1,1,1,0,1,1,0,1,1,1,1,0,0,0,0,0,0,1,0,1,1,1,0,1,1,1,0,0,1,1,0,1,0,0,0,0,1,1,1,0,1,0,1,0,0,0,1,0,1,1,1],
    [1,1,1,1,0,1,0,1,1,0,1,1,0,0,1,1,1,0,0,0,1,0,1,1,0,0,0,0,1,0,0,1,1,1,0,1,0,1,0,1,1,0,1,0,1,0,0,1,0,1,0,0,0,1,0,0,1,1,0,1],
    [1,1,1,1,0,0,0,1,0,1,1,1,0,1,1,0,1,1,1,1,1,1,0,1,0,0,0,0,1,0,1,1,0,0,1,1,1,1,0,0,0,0,0,0,1,1,1,1,0,1,1,1,0,1,0,1,1,0,0,1],
    [1,1,0,0,1,0,0,1,0,1,0,0,0,1,0,1,0,1,1,1,1,1,0,1,0,1,0,0,1,0,1,1,1,1,1,0,1,0,0,0,0,1,0,1,1,0,1,0,0,1,0,1,0,1,0,1,0,0,1,1],
    [1,1,1,1,1,1,0,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,1,0,0,0,0,0,1,0,1,0,1,0,0,1,0,1,1,1,1,0,0,1,1,0,1,0,0,0,1,1,1,1,1,1,1,0,1],
    [1,1,0,0,1,0,1,0,1,0,0,1,1,1,1,1,1,1,1,0,1,1,0,1,0,0,0,0,0,1,0,1,0,1,0,0,1,0,0,0,1,1,0,0,0,1,0,1,1,0,0,0,1,0,1,0,1,1,1,1],
    [1,1,0,1,0,0,0,0,1,1,1,1,0,1,1,1,0,1,1,0,0,0,0,0,1,1,1,0,0,1,1,1,0,1,1,0,0,1,1,0,1,0,0,0,0,1,1,0,1,1,1,1,1,1,0,0,1,0,1,1],
    [1,1,0,1,0,1,1,0,1,0,1,1,0,1,0,0,1,1,0,1,0,0,1,1,1,0,0,0,1,0,1,0,0,1,1,0,0,0,0,1,1,1,0,1,0,1,1,0,0,1,1,1,1,1,1,1,0,0,1,1],
    [1,0,1,0,0,0,1,1,0,1,1,1,1,1,1,0,0,1,0,1,0,0,1,1,1,1,1,0,0,1,1,0,1,0,1,1,1,0,0,1,1,1,1,0,1,1,0,0,1,1,0,1,1,1,1,1,1,1,1,1],
    [1,1,1,1,1,1,1,0,1,1,1,1,1,0,0,1,0,0,1,1,1,1,0,0,1,0,0,0,0,0,0,0,1,0,1,0,0,1,0,0,1,0,1,1,1,1,0,1,1,1,1,0,1,1,0,1,1,1,0,1],
    [1,0,1,0,1,0,0,1,1,1,1,1,0,1,0,1,1,1,0,1,1,1,0,0,1,0,0,0,1,1,0,1,1,1,0,0,0,0,1,1,0,0,0,0,1,1,1,1,0,1,0,1,0,0,0,1,0,1,1,1],
    [1,1,1,0,0,0,1,0,1,1,0,0,0,1,0,0,1,1,0,1,0,1,0,0,1,0,0,0,0,1,0,1,0,1,1,1,1,1,1,1,0,1,0,0,1,1,1,1,1,1,0,1,1,1,1,1,0,1,0,1],
    [1,0,1,0,0,0,1,1,0,1,0,1,0,1,0,1,1,0,0,0,0,1,0,1,0,1,1,0,0,0,0,1,1,1,1,1,1,1,0,1,0,0,0,0,1,1,1,1,1,0,1,1,1,1,1,0,1,0,0,1],
    [1,0,0,0,1,1,1,1,1,1,1,1,0,1,0,1,1,1,1,0,0,1,1,1,0,0,1,1,0,1,0,1,0,0,1,1,1,1,0,1,0,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1],
    [1,1,1,0,1,0,0,1,0,0,0,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,0,1,1],
    [1,0,0,1,1,0,0,0,1,1,0,1,1,0,0,1,0,1,1,1,1,0,1,1,1,1,1,0,1,0,0,0,0,0,0,0,0,1,1,0,1,0,0,0,1,0,1,1,1,0,0,1,0,1,0,1,0,1,0,1],
    [1,0,1,0,1,0,0,1,0,0,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,0,0,0,0,1,0,1,1,1,1,0,1,1,0,1,0,0,0,1,0,1,1,1,1,0,1,1,1,0,1,1,0,1,1],
    [1,1,1,0,1,0,0,1,1,0,1,1,1,1,0,1,0,1,0,1,1,0,0,0,0,1,0,1,1,1,1,0,0,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,1,1,0,1,0,1,1],
    [1,1,1,0,1,1,1,1,1,0,0,1,1,1,0,0,1,0,1,0,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,1,1,1,1,1,1,1,0,1,1,0,0,0,1,0,0,0,0,1],
    [1,0,1,0,1,0,0,0,0,1,1,1,1,1,0,0,1,1,1,0,1,0,1,1,0,0,0,1,0,1,1,1,0,0,0,1,0,1,1,1,1,1,0,1,1,0,1,1,0,1,1,0,1,0,1,0,1,0,1,1],
    [1,0,1,1,0,1,1,1,0,1,0,0,1,1,1,1,0,1,0,0,0,1,1,1,1,0,1,1,0,1,0,0,1,0,0,1,1,0,1,0,0,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,0,0,0,1],
    [1,0,0,0,1,1,1,0,1,1,0,0,1,1,1,1,1,0,0,0,1,0,1,1,0,0,0,0,1,1,1,1,1,0,0,0,1,1,0,1,1,0,1,1,1,1,0,1,1,0,0,0,1,0,0,0,1,1,1,1],
    [1,1,0,1,0,0,1,0,0,1,0,1,0,0,1,1,0,1,0,0,1,0,1,1,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,0,0,1,0,0,1,1,1,0,1,1,1,1,0,1,1],
    [1,0,0,0,1,1,1,0,1,1,1,1,1,1,0,1,1,1,0,1,0,0,1,1,1,1,1,0,0,0,1,0,0,0,1,1,1,1,1,0,0,0,0,0,1,0,1,0,1,1,1,0,1,1,1,0,1,1,1,1],
    [1,0,0,0,1,1,1,1,0,1,1,1,1,1,1,0,1,1,1,1,1,0,0,0,1,0,1,1,1,1,1,0,1,0,1,1,1,0,1,1,0,0,1,0,0,1,0,1,0,0,1,1,0,1,1,0,1,1,0,1],
    [1,0,1,1,1,1,1,0,1,1,0,1,1,1,1,0,1,0,1,1,1,1,1,1,1,1,0,1,0,0,0,0,0,1,1,1,0,1,1,1,1,0,0,0,1,0,1,0,0,0,1,0,1,0,0,1,0,1,0,1],
    [1,0,1,0,0,1,1,0,0,0,1,0,0,1,1,1,0,0,1,1,1,1,1,1,1,1,0,1,1,0,0,0,1,1,1,0,0,0,0,0,1,0,1,0,0,0,1,0,0,0,0,1,0,0,0,0,1,1,1,1],
    [1,1,0,1,0,0,0,1,0,0,1,0,0,0,1,1,0,1,0,1,0,1,0,1,0,0,0,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,0,0,0,0,1,0,1,1,0,1,1,1,0,1,0,1,1],
    [1,1,0,1,1,0,1,0,1,1,1,1,0,0,0,1,1,1,1,1,0,1,1,1,1,0,0,1,1,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,1,1,0,1,0,0,1,1,1,0,1,1,0,0,1,1],
    [1,1,0,1,0,1,1,0,0,1,0,0,0,0,1,0,1,0,0,0,1,1,0,1,0,0,0,1,0,0,1,1,1,1,1,1,0,0,0,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,0,1,1,1,1],
    [1,0,0,1,0,1,1,0,0,0,1,0,1,1,1,0,1,0,1,0,1,0,1,1,0,1,1,0,0,0,0,0,1,1,1,1,1,0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,0,1,1,1,0,1,1,1],
    [1,1,0,0,0,1,1,1,1,0,0,0,0,1,1,1,0,0,1,0,0,0,1,1,0,1,0,0,1,1,1,1,1,0,0,1,1,1,0,0,1,0,0,1,1,1,0,0,0,1,0,0,0,1,0,0,0,0,0,1],
    [1,0,0,0,0,0,1,1,1,1,0,1,1,0,1,1,0,0,0,1,0,0,0,1,1,1,1,0,0,1,0,1,1,1,0,1,0,1,1,1,0,1,0,1,0,1,0,1,0,1,1,0,0,1,1,1,0,0,1,1],
    [1,1,0,0,1,0,1,0,1,1,0,1,0,1,0,1,0,0,1,0,1,1,1,1,1,1,0,1,0,0,1,0,1,1,1,1,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,0,0,0,0,0,0,0,"G",1],
    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
]

# --- 1. BFS ê¸¸ì°¾ê¸° í•¨ìˆ˜ (ìˆ˜ì •ë¨: ë…¸ë“œ ìˆ˜ ë° ì‹œê°„ ì¸¡ì • ë¡œì§ ì¶”ê°€) ---
def find_path_bfs(grid):
    """
    ì£¼ì–´ì§„ ë§µ(list-of-lists)ì„ ê¸°ë°˜ìœ¼ë¡œ BFSë¥¼ ì‚¬ìš©í•´ 'S'ì—ì„œ 'G'ê¹Œì§€ì˜ ê²½ë¡œë¥¼ ì°¾ìŠµë‹ˆë‹¤.
    ì‹¤í–‰ ì‹œê°„ê³¼ íƒìƒ‰ ë…¸ë“œ ìˆ˜ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
    """
    
    rows = len(grid)
    cols = len(grid[0])
    
    start = None
    goal = None
    
    # 1. ì‹œì‘ì (S)ê³¼ ë„ì°©ì (G) ìœ„ì¹˜ ì°¾ê¸°
    for r in range(rows):
        for c in range(cols):
            if grid[r][c] == 'S':
                start = (r, c)
            elif grid[r][c] == 'G':
                goal = (r, c)
        if start and goal:
            break
    
    if not start or not goal:
        return None, "ì‹œì‘ì  'S' ë˜ëŠ” ë„ì°©ì  'G'ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.", 0, 0

    # 2. BFS ì´ˆê¸°í™”
    queue = collections.deque([start])
    visited = {start}
    parent_map = {start: None} # ê²½ë¡œ ì—­ì¶”ì ìš©
    
    # *** ì„±ëŠ¥ ì¸¡ì • ë³€ìˆ˜ ì¶”ê°€ ***
    nodes_explored = 0
    start_time = time.time()

    # 3. BFS íƒìƒ‰
    path_found = False
    while queue:
        current_r, current_c = queue.popleft()
        
        nodes_explored += 1 # íƒìƒ‰ ë…¸ë“œ ìˆ˜ ì¦ê°€ (íì—ì„œ êº¼ë‚¼ ë•Œ ì¹´ìš´íŠ¸)

        if (current_r, current_c) == goal:
            path_found = True
            break # ëª©í‘œ ë„ì°©

        # 4ë°©í–¥ íƒìƒ‰ (ìƒ, í•˜, ì¢Œ, ìš°)
        for dr, dc in [(-1, 0), (1, 0), (0, -1), (0, 1)]:
            r, c = current_r + dr, current_c + dc

            # ë§µ ë²”ìœ„ ì²´í¬, ë°©ë¬¸ ì—¬ë¶€ ì²´í¬
            if 0 <= r < rows and 0 <= c < cols and (r, c) not in visited:
                
                # *** ì¤‘ìš”: ë²½(1)ì´ ì•„ë‹Œì§€ ì²´í¬ ***
                if grid[r][c] != 1: 
                    visited.add((r, c))
                    queue.append((r, c))
                    parent_map[(r, c)] = (current_r, current_c)

    end_time = time.time()
    execution_time = end_time - start_time

    # 4. ê²½ë¡œ ì¬êµ¬ì„±
    if not path_found:
        return None, "ê²½ë¡œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.", execution_time, nodes_explored

    path = []
    current = goal
    while current is not None:
        path.append(current)
        current = parent_map.get(current) # ì•ˆì „í•˜ê²Œ .get() ì‚¬ìš©
    
    path.reverse() # S -> G ìˆœì„œë¡œ ë³€ê²½
    return path, "ê²½ë¡œ ì°¾ê¸° ì„±ê³µ", execution_time, nodes_explored

# --- 2. ì‹œê°í™” í•¨ìˆ˜ ---

# ë§µ ì—…ìŠ¤ì¼€ì¼ë§ í•¨ìˆ˜
def upscale(src, size, scale) -> np.array:
    row = size * scale
    col = size * scale
    dst = np.zeros((row, col, 3), np.uint8)
    for i in range(0, size, 1):
        for j in range(0, size, 1):
            for k in range(0, scale, 1):
                for l in range(0, scale, 1):
                    # BGR ìˆœì„œë¡œ ë³µì‚¬
                    dst[i * scale + k][j * scale + l] = src[i][j]
    return dst

# ì •ë‹µì—´ ê²½ë¡œ í‘œì‹œ í•¨ìˆ˜ (cv2.lineì„ ì‚¬ìš©í•˜ë„ë¡ ê°œì„ )
def drawpath(src_image, path_array, scale, color, thickness=3) -> None:
    """
    Numpy ê²½ë¡œ ë°°ì—´ì„ ë°›ì•„ ì—…ìŠ¤ì¼€ì¼ëœ ì´ë¯¸ì§€ì— cv2.lineìœ¼ë¡œ ê²½ë¡œë¥¼ ê·¸ë¦½ë‹ˆë‹¤.
    """
    # ê° ì…€ì˜ ì¤‘ì‹¬ ì¢Œí‘œë¡œ ë³€í™˜
    scaled_path_coords = path_array * scale + (scale // 2)
    
    # ì—°ì†ëœ ì ë“¤ì„ ì„ ìœ¼ë¡œ ì—°ê²°
    for i in range(len(scaled_path_coords) - 1):
        # cv2.lineì€ (x, y) ì¢Œí‘œë¥¼ ë°›ìœ¼ë¯€ë¡œ (col, row) ìˆœì„œë¡œ ë³€í™˜
        p1 = (int(scaled_path_coords[i][1]), int(scaled_path_coords[i][0]))     # (col1, row1)
        p2 = (int(scaled_path_coords[i+1][1]), int(scaled_path_coords[i+1][0])) # (col2, row2)
        
        cv2.line(src_image, p1, p2, color, thickness)


# --- 3. ë©”ì¸ ì‹¤í–‰ ë¡œì§ ---

print("BFS ê²½ë¡œ íƒìƒ‰ ì‹œì‘...")
# 1. BFS ì‹¤í–‰
# ë°˜í™˜ê°’ì— ì‹¤í–‰ ì‹œê°„(execution_time)ê³¼ íƒìƒ‰ ë…¸ë“œ ìˆ˜(nodes_explored) ì¶”ê°€
path, message, execution_time, nodes_explored = find_path_bfs(l)
print(f"íƒìƒ‰ ê²°ê³¼: **{message}**")

# --- ì„±ëŠ¥ ë° ê²½ë¡œ ì •ë³´ ì¶œë ¥ ---
print("\n--- ğŸ“Š BFS ì„±ëŠ¥ ë° ê²½ë¡œ ì •ë³´ ---")
print(f"**ì‹¤í–‰ ì‹œê°„:** {execution_time:.6f} ì´ˆ")
print(f"**íƒìƒ‰ ë…¸ë“œ ìˆ˜:** {nodes_explored} ê°œ")

if path:
    path_length = len(path)
    print(f"**ê²½ë¡œ ê¸¸ì´:** {path_length} ìŠ¤í…") # Sì™€ G í¬í•¨í•œ ê¸¸ì´

    # 2. ë§µ ì´ë¯¸ì§€ ìƒì„±
    map_size = 60
    scale = 15 # 15ë°° í™•ëŒ€
    
    # ë§µ ë°ì´í„° ì¤€ë¹„: '1'ì€ ë²½(YEL), '0'/'S'/'G'ëŠ” ê¸¸(PUR)ë¡œ ì´ˆê¸°í™”
    map_image = np.zeros((map_size, map_size, 3), np.uint8)
    
    # Sì™€ Gì˜ ì‹¤ì œ ì¢Œí‘œ (íƒìƒ‰ í•¨ìˆ˜ì—ì„œ ì°¾ì€ ê°’ ì‚¬ìš©)
    # ë§µ ì›ë³¸ `l`ì—ì„œ 'S'=(1, 1), 'G'=(58, 58)ì„ ì§ì ‘ ì°¾ë„ë¡ ë³´ì •
    # find_path_bfs í•¨ìˆ˜ì—ì„œ start, goalì„ ì°¾ì•˜ìœ¼ë¯€ë¡œ, ê·¸ ê°’ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
    start_pos = path[0] if path else (1, 1)
    goal_pos = path[-1] if path else (58, 58)
    
    for i in range(map_size):
        for j in range(map_size):
            if l[i][j] == 1:
                map_image[i][j] = YEL # ë²½
            else:
                map_image[i][j] = PUR # ê¸¸

    # ì‹œì‘ì ê³¼ ë„ì°©ì ì€ REDë¡œ í‘œì‹œ
    map_image[start_pos[0]][start_pos[1]] = RED
    map_image[goal_pos[0]][goal_pos[1]] = RED

    # 3. ë§µ ì—…ìŠ¤ì¼€ì¼
    print(f"\n{scale}ë°° ì—…ìŠ¤ì¼€ì¼ë§ ì¤‘...")
    map_upscaled = upscale(map_image, map_size, scale)
    
    # 4. ê²½ë¡œ(list)ë¥¼ Numpy ë°°ì—´ë¡œ ë³€í™˜
    path_np = np.array(path, dtype=np.int32)
    
    # 5. ì—…ìŠ¤ì¼€ì¼ëœ ë§µì— ê²½ë¡œ ê·¸ë¦¬ê¸°
    print("ê²½ë¡œ ê·¸ë¦¬ëŠ” ì¤‘...")
    drawpath(map_upscaled, path_np, scale, RED, thickness=(scale // 2))

    # 6. ìµœì¢… ê²°ê³¼ í‘œì‹œ
    # BFS íƒìƒ‰ì´ ì–´ë–»ê²Œ ì´ë£¨ì–´ì§€ëŠ”ì§€ ì‹œê°ì ìœ¼ë¡œ ì´í•´í•˜ëŠ” ë° ë„ì›€ì´ ë  ìˆ˜ ìˆë„ë¡ 
    #  íƒœê·¸ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.
    
    cv2.imshow("BFS Path on Upscaled Maze Map", map_upscaled)
    
else:
    print("ê²½ë¡œë¥¼ ì°¾ì§€ ëª»í–ˆìœ¼ë¯€ë¡œ ì‹œê°í™”í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")


cv2.waitKey(0)
cv2.destroyAllWindows()
