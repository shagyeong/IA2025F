import numpy as np
import cv2
import collections
import time
import heapq # ìš°ì„ ìˆœìœ„ íë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ heapq ëª¨ë“ˆ ì¶”ê°€

# --- ìƒ‰ìƒ ì„¸íŒ… ---
YEL = (0, 255, 255)  # yellow (ë²½)
PUR = (153, 0, 102)  # purple (ê¸¸)
RED = (0, 0, 255)    # red (ì‹œì‘, ë, ê²½ë¡œ)

# --- ë§µ ì›ë³¸ (60x60) ---
l = [
    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    [1,"S",0,1,1,0,0,0,1,1,1,1,1,1,1,0,1,1,1,0,1,0,0,1,1,0,1,1,1,0,0,0,0,1,0,1,1,0,0,0,1,0,1,1,1,1,1,1,1,0,1,1,1,1,0,0,0,1,0,1],
    [1,1,0,0,0,1,0,0,0,1,1,1,1,1,0,0,1,0,1,0,1,1,1,1,1,1,0,1,1,0,1,1,1,1,0,0,1,1,1,0,1,0,0,1,0,0,1,1,0,1,1,1,0,0,1,1,1,0,0,1],
    [1,1,0,0,1,0,1,0,1,1,1,1,0,0,0,1,1,0,0,1,1,1,0,0,1,1,1,1,0,1,1,1,0,1,1,0,0,1,1,1,1,1,1,1,1,1,0,1,0,0,1,1,0,1,1,0,1,1,0,1],
    [1,0,0,0,0,1,1,0,0,0,1,1,1,0,1,1,1,1,1,1,0,1,0,1,1,0,0,0,0,0,1,1,1,1,1,1,0,1,0,1,1,0,0,1,0,1,1,0,1,1,0,1,1,1,0,1,0,1,1,1],
    [1,1,0,0,0,0,1,1,0,1,1,1,0,1,0,1,1,0,1,1,0,1,1,0,0,1,1,1,0,0,0,1,1,0,0,0,0,0,1,0,1,0,0,1,1,1,1,1,0,0,1,0,1,1,0,0,1,1,1,1],
    [1,1,0,0,1,0,1,1,1,1,0,0,1,0,1,1,1,1,0,0,0,0,1,1,1,0,0,1,0,1,0,0,0,0,0,1,0,1,0,0,0,0,1,0,1,0,0,1,0,1,1,0,1,1,1,1,0,0,1,1],
    [1,0,0,0,1,0,1,0,1,0,1,1,1,0,1,0,1,1,1,1,0,1,0,1,0,0,0,1,1,0,1,1,0,0,1,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,0,1,1,1,1,0,0,1,1],
    [1,0,1,0,0,0,0,0,1,1,1,1,1,0,1,1,0,1,0,1,1,0,1,0,0,1,1,1,0,1,1,1,0,1,0,0,0,1,0,0,0,0,1,0,1,0,0,1,1,1,0,0,1,0,1,1,1,1,1,1],
    [1,0,0,0,0,0,0,0,1,1,1,1,0,1,0,0,0,1,1,1,0,0,0,1,0,1,0,1,1,1,1,1,0,1,1,1,1,0,1,1,1,1,0,1,1,1,1,1,1,0,1,0,0,1,1,1,1,0,1,1],
    [1,0,0,0,0,0,0,0,0,1,0,1,1,0,0,1,0,0,1,0,0,1,1,1,0,0,1,0,1,0,0,1,0,0,0,1,0,0,1,1,1,1,1,0,0,1,0,0,0,0,1,0,0,1,0,1,1,1,0,1],
    [1,1,0,0,0,0,0,0,0,1,1,0,1,1,0,1,0,0,1,1,0,1,0,1,0,0,0,1,0,1,1,0,1,1,1,1,1,0,1,0,1,1,1,1,1,1,0,1,1,1,0,0,1,1,1,1,1,1,1,1],
    [1,1,1,0,1,0,0,0,0,0,1,1,1,1,1,0,1,0,1,1,0,1,1,1,1,0,1,0,0,0,1,1,1,1,0,0,1,0,0,0,0,1,1,0,1,1,1,1,1,1,1,1,0,0,1,0,0,0,0,1],
    [1,0,0,1,1,0,0,0,0,1,1,0,1,1,1,0,0,0,1,1,1,1,1,1,1,1,0,0,1,0,0,0,1,1,0,1,0,0,1,1,0,1,1,1,1,0,0,1,0,1,0,0,1,1,1,1,0,1,1,1],
    [1,0,0,1,1,1,1,0,0,0,1,1,0,1,0,1,0,0,1,1,1,1,1,0,0,1,1,0,1,0,1,1,0,0,1,1,1,0,1,0,0,1,0,1,0,1,0,1,1,1,0,1,1,1,1,1,1,1,1,1],
    [1,1,0,1,1,0,1,0,0,0,1,0,0,0,1,1,1,1,0,0,1,1,1,0,1,0,1,1,0,1,0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,1,1,0,0,1,0,0,1,0,1,1,1,1,1],
    [1,1,0,1,1,0,0,1,0,0,0,0,0,0,0,0,0,0,1,1,1,0,1,1,0,1,1,1,1,1,1,0,1,0,0,1,1,0,0,1,0,1,0,1,0,0,1,0,0,0,0,0,0,0,0,0,1,1,1,1],
    [1,0,1,1,0,1,1,1,0,1,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,1,1,1,0,0,1,0,0,1,1,1,0,1,0,1,1,0,0,1,1,1,0,1,1,1,0,1,1,0,0,1],
    [1,0,1,0,1,1,1,1,1,0,1,1,1,0,0,1,0,1,0,0,0,0,1,0,1,0,0,1,1,0,1,1,1,1,0,1,1,0,1,1,0,1,0,1,1,1,1,0,1,1,0,1,1,1,1,0,1,0,1,1],
    [1,0,1,1,1,0,1,0,0,1,1,0,1,1,1,0,1,0,1,1,0,0,1,0,1,1,0,1,1,0,1,0,0,0,0,0,1,1,1,1,1,1,1,1,0,1,1,0,1,0,1,1,0,0,1,1,1,1,1,1],
    [1,1,0,0,0,0,0,0,1,1,1,0,1,1,0,1,0,1,0,0,0,0,0,0,1,0,0,1,1,0,1,1,1,0,1,1,1,0,1,0,1,1,1,1,0,0,1,1,1,1,0,0,1,0,1,1,1,0,1,1],
    [1,1,1,0,1,0,1,1,1,1,1,1,1,1,1,1,0,1,1,0,0,0,0,1,0,1,1,0,0,1,1,0,1,1,1,1,0,0,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,0,0,0,1,1],
    [1,1,1,0,0,0,1,0,1,0,0,1,0,1,0,0,0,0,1,1,0,0,0,0,1,1,1,1,0,1,0,0,0,1,1,1,0,0,1,0,0,1,1,1,1,1,0,1,0,1,1,1,1,1,1,1,1,1,1,1],
    [1,1,1,0,0,1,1,0,1,0,0,0,0,1,1,1,1,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,1,1,1,1,0,1,0,0,0,1,1,0,1,1,1,0,0,0,1,1,1,1],
    [1,0,1,1,1,0,1,1,1,0,1,0,1,0,0,1,1,1,1,0,0,0,0,0,0,0,1,1,0,0,1,0,1,0,1,1,0,1,1,1,1,1,1,1,0,1,1,0,0,0,0,1,1,0,0,1,0,1,1,1],
    [1,1,1,0,1,0,1,1,1,1,1,1,0,1,1,0,1,1,1,1,0,0,0,0,0,0,1,0,1,1,1,0,1,1,1,0,0,1,1,0,1,0,0,0,0,1,1,1,0,1,0,1,0,0,0,1,0,1,1,1],
    [1,1,1,1,0,1,0,1,1,0,1,1,0,0,1,1,1,0,0,0,1,0,1,1,0,0,0,0,1,0,0,1,1,1,0,1,0,1,0,1,1,0,1,0,1,0,0,1,0,1,0,0,0,1,0,0,1,1,0,1],
    [1,1,1,1,0,0,0,1,0,1,1,1,0,1,1,0,1,1,1,1,1,1,0,1,0,0,0,0,1,0,1,1,0,0,1,1,1,1,0,0,0,0,0,0,1,1,1,1,0,1,1,1,0,1,0,1,1,0,0,1],
    [1,1,0,0,1,0,0,1,0,1,0,0,0,1,0,1,0,1,1,1,1,1,0,1,0,1,0,0,1,0,1,1,1,1,1,0,1,0,0,0,0,1,0,1,1,0,1,0,0,1,0,1,0,1,0,1,0,0,1,1],
    [1,1,1,1,1,1,0,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,1,0,0,0,0,0,1,0,1,0,1,0,0,1,0,1,1,1,1,0,0,1,1,0,1,0,0,0,1,1,1,1,1,1,1,0,1],
    [1,1,0,0,1,0,1,0,1,0,0,1,1,1,1,1,1,1,1,0,1,1,0,1,0,0,0,0,0,1,0,1,0,1,0,0,1,0,0,0,1,1,0,0,0,1,0,1,1,0,0,0,1,0,1,0,1,1,1,1],
    [1,1,0,1,0,0,0,0,1,1,1,1,0,1,1,1,0,1,1,0,0,0,0,0,1,1,1,0,0,1,1,1,0,1,1,0,0,1,1,0,1,0,0,0,0,1,1,0,1,1,1,1,1,1,0,0,1,0,1,1],
    [1,1,0,1,0,1,1,0,1,0,1,1,0,1,0,0,1,1,0,1,0,0,1,1,1,0,0,0,1,0,1,0,0,1,1,0,0,0,0,1,1,1,0,1,0,1,1,0,0,1,1,1,1,1,1,1,0,0,1,1],
    [1,0,1,0,0,0,1,1,0,1,1,1,1,1,1,0,0,1,0,1,0,0,1,1,1,1,1,0,0,1,1,0,1,0,1,1,1,0,0,1,1,1,1,0,1,1,0,0,1,1,0,1,1,1,1,1,1,1,1,1],
    [1,1,1,1,1,1,1,0,1,1,1,1,1,0,0,1,0,0,1,1,1,1,0,0,1,0,0,0,0,0,0,0,1,0,1,0,0,1,0,0,1,0,1,1,1,1,0,1,1,1,1,0,1,1,0,1,1,1,0,1],
    [1,0,1,0,1,0,0,1,1,1,1,1,0,1,0,1,1,1,0,1,1,1,0,0,1,0,0,0,1,1,0,1,1,1,0,0,0,0,1,1,0,0,0,0,1,1,1,1,0,1,0,1,0,0,0,1,0,1,1,1],
    [1,1,1,0,0,0,1,0,1,1,0,0,0,1,0,0,1,1,0,1,0,1,0,0,1,0,0,0,0,1,0,1,0,1,1,1,1,1,1,1,0,1,0,0,1,1,1,1,1,1,0,1,1,1,1,1,0,1,0,1],
    [1,0,1,0,0,0,1,1,0,1,0,1,0,1,0,1,1,0,0,0,0,1,0,1,0,1,1,0,0,0,0,1,1,1,1,1,1,1,0,1,0,0,0,0,1,1,1,1,1,0,1,1,1,1,1,0,1,0,0,1],
    [1,0,0,0,1,1,1,1,1,1,1,1,0,1,0,1,1,1,1,0,0,1,1,1,0,0,1,1,0,1,0,1,0,0,1,1,1,1,0,1,0,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1],
    [1,1,1,0,1,0,0,1,0,0,0,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,0,1,1],
    [1,0,0,1,1,0,0,0,1,1,0,1,1,0,0,1,0,1,1,1,1,0,1,1,1,1,1,0,1,0,0,0,0,0,0,0,0,1,1,0,1,0,0,0,1,0,1,1,1,0,0,1,0,1,0,1,0,1,0,1],
    [1,0,1,0,1,0,0,1,0,0,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,0,0,0,0,1,0,1,1,1,1,0,1,1,0,1,0,0,0,1,0,1,1,1,1,0,1,1,1,0,1,1,0,1,1],
    [1,1,1,0,1,0,0,1,1,0,1,1,1,1,0,1,0,1,0,1,1,0,0,0,0,1,0,1,1,1,1,0,0,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,1,1,0,1,0,1,1],
    [1,1,1,0,1,1,1,1,1,0,0,1,1,1,0,0,1,0,1,0,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,1,1,1,1,1,1,1,0,1,1,0,0,0,1,0,0,0,0,1],
    [1,0,1,0,1,0,0,0,0,1,1,1,1,1,0,0,1,1,1,0,1,0,1,1,0,0,0,1,0,1,1,1,0,0,0,1,0,1,1,1,1,1,0,1,1,0,1,1,0,1,1,0,1,0,1,0,1,0,1,1],
    [1,0,1,1,0,1,1,1,0,1,0,0,1,1,1,1,0,1,0,0,0,1,1,1,1,0,1,1,0,1,0,0,1,0,0,1,1,0,1,0,0,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,0,0,0,1],
    [1,0,0,0,1,1,1,0,1,1,0,0,1,1,1,1,1,0,0,0,1,0,1,1,0,0,0,0,1,1,1,1,1,0,0,0,1,1,0,1,1,0,1,1,1,1,0,1,1,0,0,0,1,0,0,0,1,1,1,1],
    [1,1,0,1,0,0,1,0,0,1,0,1,0,0,1,1,0,1,0,0,1,0,1,1,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,0,0,1,0,0,1,1,1,0,1,1,1,1,0,1,1],
    [1,0,0,0,1,1,1,0,1,1,1,1,1,1,0,1,1,1,0,1,0,0,1,1,1,1,1,0,0,0,1,0,0,0,1,1,1,1,1,0,0,0,0,0,1,0,1,0,1,1,1,0,1,1,1,0,1,1,1,1],
    [1,0,0,0,1,1,1,1,0,1,1,1,1,1,1,0,1,1,1,1,1,0,0,0,1,0,1,1,1,1,1,0,1,0,1,1,1,0,1,1,0,0,1,0,0,1,0,1,0,0,1,1,0,1,1,0,1,1,0,1],
    [1,0,1,1,1,1,1,0,1,1,0,1,1,1,1,0,1,0,1,1,1,1,1,1,1,1,0,1,0,0,0,0,0,1,1,1,0,1,1,1,1,0,0,0,1,0,1,0,0,0,1,0,1,0,0,1,0,1,0,1],
    [1,0,1,0,0,1,1,0,0,0,1,0,0,1,1,1,0,0,1,1,1,1,1,1,1,1,0,1,1,0,0,0,1,1,1,0,0,0,0,0,1,0,1,0,0,0,1,0,0,0,0,1,0,0,0,0,1,1,1,1],
    [1,1,0,1,0,0,0,1,0,0,1,0,0,0,1,1,0,1,0,1,0,1,0,1,0,0,0,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,0,0,0,0,1,0,1,1,0,1,1,1,0,1,0,1,1],
    [1,1,0,1,1,0,1,0,1,1,1,1,0,0,0,1,1,1,1,1,0,1,1,1,1,0,0,1,1,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,1,1,0,1,0,0,1,1,1,0,1,1,0,0,1,1],
    [1,1,0,1,0,1,1,0,0,1,0,0,0,0,1,0,1,0,0,0,1,1,0,1,0,0,0,1,0,0,1,1,1,1,1,1,0,0,0,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,0,1,1,1,1],
    [1,0,0,1,0,1,1,0,0,0,1,0,1,1,1,0,1,0,1,0,1,0,1,1,0,1,1,0,0,0,0,0,1,1,1,1,1,0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,0,1,1,1,0,1,1,1],
    [1,1,0,0,0,1,1,1,1,0,0,0,0,1,1,1,0,0,1,0,0,0,1,1,0,1,0,0,1,1,1,1,1,0,0,1,1,1,0,0,1,0,0,1,1,1,0,0,0,1,0,0,0,1,0,0,0,0,0,1],
    [1,0,0,0,0,0,1,1,1,1,0,1,1,0,1,1,0,0,0,1,0,0,0,1,1,1,1,0,0,1,0,1,1,1,0,1,0,1,1,1,0,1,0,1,0,1,0,1,0,1,1,0,0,1,1,1,0,0,1,1],
    [1,1,0,0,1,0,1,0,1,1,0,1,0,1,0,1,0,0,1,0,1,1,1,1,1,1,0,1,0,0,1,0,1,1,1,1,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,0,0,0,0,0,0,0,"G",1],
    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
]

# --- íœ´ë¦¬ìŠ¤í‹± í•¨ìˆ˜ (ë§¨í•´íŠ¼ ê±°ë¦¬) ---
def manhattan_distance(p1, p2):
    """ë‘ ì¢Œí‘œ (r, c) ì‚¬ì´ì˜ ë§¨í•´íŠ¼ ê±°ë¦¬ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤."""
    return abs(p1[0] - p2[0]) + abs(p1[1] - p2[1])

# --- 1. Greedy Best-First Search ê¸¸ì°¾ê¸° í•¨ìˆ˜ ---
def find_path_greedy(grid):
    """
    ì£¼ì–´ì§„ ë§µì„ ê¸°ë°˜ìœ¼ë¡œ Greedy Best-First Searchë¥¼ ì‚¬ìš©í•´ 'S'ì—ì„œ 'G'ê¹Œì§€ì˜ ê²½ë¡œë¥¼ ì°¾ìŠµë‹ˆë‹¤.
    """
    
    rows = len(grid)
    cols = len(grid[0])
    
    start = None
    goal = None
    
    # 1. ì‹œì‘ì (S)ê³¼ ë„ì°©ì (G) ìœ„ì¹˜ ì°¾ê¸°
    for r in range(rows):
        for c in range(cols):
            if grid[r][c] == 'S':
                start = (r, c)
            elif grid[r][c] == 'G':
                goal = (r, c)
        if start and goal:
            break
    
    if not start or not goal:
        return None, "ì‹œì‘ì  'S' ë˜ëŠ” ë„ì°©ì  'G'ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.", 0, 0

    # 2. Greedy Best-First Search ì´ˆê¸°í™”
    # ìš°ì„ ìˆœìœ„ í: (íœ´ë¦¬ìŠ¤í‹± ê°’, (r, c)) í˜•íƒœë¡œ ì €ì¥í•˜ì—¬ íœ´ë¦¬ìŠ¤í‹±ì´ ë‚®ì€(ëª©í‘œì— ê°€ê¹Œìš´) ë…¸ë“œë¶€í„° íƒìƒ‰
    initial_heuristic = manhattan_distance(start, goal)
    # í í•­ëª©: (f_score, r, c) -> f_scoreëŠ” ì—¬ê¸°ì„œëŠ” íœ´ë¦¬ìŠ¤í‹±(h_score) ê°’
    priority_queue = [(initial_heuristic, start[0], start[1])] 
    visited = {start}
    parent_map = {start: None}
    
    # ì„±ëŠ¥ ì¸¡ì • ë³€ìˆ˜
    nodes_explored = 0
    start_time = time.time()

    # 3. íƒìƒ‰
    path_found = False
    while priority_queue:
        # íœ´ë¦¬ìŠ¤í‹± ê°’ì´ ê°€ì¥ ë‚®ì€ ë…¸ë“œë¥¼ êº¼ëƒ…ë‹ˆë‹¤ (Greedy Choice)
        h_score, current_r, current_c = heapq.heappop(priority_queue)
        current_node = (current_r, current_c)
        
        nodes_explored += 1 # íƒìƒ‰ ë…¸ë“œ ìˆ˜ ì¦ê°€

        if current_node == goal:
            path_found = True
            break

        # 4ë°©í–¥ íƒìƒ‰
        for dr, dc in [(-1, 0), (1, 0), (0, -1), (0, 1)]:
            r, c = current_r + dr, current_c + dc
            neighbor = (r, c)

            # ë§µ ë²”ìœ„ ì²´í¬, ë°©ë¬¸ ì—¬ë¶€ ì²´í¬, ë²½(1)ì´ ì•„ë‹Œì§€ ì²´í¬
            if 0 <= r < rows and 0 <= c < cols and neighbor not in visited and grid[r][c] != 1:
                
                # ìƒˆë¡œìš´ íœ´ë¦¬ìŠ¤í‹± ê°’ ê³„ì‚° (Gê¹Œì§€ì˜ ì˜ˆìƒ ê±°ë¦¬)
                new_h_score = manhattan_distance(neighbor, goal)
                
                visited.add(neighbor)
                parent_map[neighbor] = current_node
                # íì— ì¶”ê°€: (íœ´ë¦¬ìŠ¤í‹± ê°’, r, c)
                heapq.heappush(priority_queue, (new_h_score, r, c))

    end_time = time.time()
    execution_time = end_time - start_time

    # 4. ê²½ë¡œ ì¬êµ¬ì„±
    if not path_found:
        return None, "ê²½ë¡œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.", execution_time, nodes_explored

    path = []
    current = goal
    while current is not None:
        path.append(current)
        current = parent_map.get(current)
    
    path.reverse()
    return path, "ê²½ë¡œ ì°¾ê¸° ì„±ê³µ", execution_time, nodes_explored

# --- 2. ì‹œê°í™” í•¨ìˆ˜ (ì¬ì‚¬ìš©) ---

# ë§µ ì—…ìŠ¤ì¼€ì¼ë§ í•¨ìˆ˜
def upscale(src, size, scale) -> np.array:
    row = size * scale
    col = size * scale
    dst = np.zeros((row, col, 3), np.uint8)
    for i in range(0, size, 1):
        for j in range(0, size, 1):
            for k in range(0, scale, 1):
                for l in range(0, scale, 1):
                    dst[i * scale + k][j * scale + l] = src[i][j]
    return dst

# ì •ë‹µì—´ ê²½ë¡œ í‘œì‹œ í•¨ìˆ˜
def drawpath(src_image, path_array, scale, color, thickness=3) -> None:
    scaled_path_coords = path_array * scale + (scale // 2)
    for i in range(len(scaled_path_coords) - 1):
        p1 = (int(scaled_path_coords[i][1]), int(scaled_path_coords[i][0]))
        p2 = (int(scaled_path_coords[i+1][1]), int(scaled_path_coords[i+1][0]))
        cv2.line(src_image, p1, p2, color, thickness)


# --- 3. ë©”ì¸ ì‹¤í–‰ ë¡œì§ ---

print("Greedy Best-First Search ê²½ë¡œ íƒìƒ‰ ì‹œì‘...")
# 1. Greedy BFS ì‹¤í–‰
path, message, execution_time, nodes_explored = find_path_greedy(l)
print(f"íƒìƒ‰ ê²°ê³¼: **{message}**")

# --- ì„±ëŠ¥ ë° ê²½ë¡œ ì •ë³´ ì¶œë ¥ ---
print("\n--- ğŸ“Š Greedy BFS ì„±ëŠ¥ ë° ê²½ë¡œ ì •ë³´ ---")
print(f"**ì‹¤í–‰ ì‹œê°„:** {execution_time:.6f} ì´ˆ")
print(f"**íƒìƒ‰ ë…¸ë“œ ìˆ˜:** {nodes_explored} ê°œ")

if path:
    path_length = len(path)
    print(f"**ê²½ë¡œ ê¸¸ì´:** {path_length} ìŠ¤í…")

    # 2. ë§µ ì´ë¯¸ì§€ ìƒì„± ë° ì´ˆê¸°í™”
    map_size = 60
    scale = 15
    map_image = np.zeros((map_size, map_size, 3), np.uint8)
    
    start_pos = path[0] if path else (1, 1)
    goal_pos = path[-1] if path else (58, 58)
    
    for i in range(map_size):
        for j in range(map_size):
            if l[i][j] == 1:
                map_image[i][j] = YEL
            else:
                map_image[i][j] = PUR

    map_image[start_pos[0]][start_pos[1]] = RED
    map_image[goal_pos[0]][goal_pos[1]] = RED

    # 3. ë§µ ì—…ìŠ¤ì¼€ì¼
    print(f"\n{scale}ë°° ì—…ìŠ¤ì¼€ì¼ë§ ì¤‘...")
    map_upscaled = upscale(map_image, map_size, scale)
    
    # 4. ê²½ë¡œ ê·¸ë¦¬ê¸°
    path_np = np.array(path, dtype=np.int32)
    print("ê²½ë¡œ ê·¸ë¦¬ëŠ” ì¤‘...")
    # Greedy SearchëŠ” íœ´ë¦¬ìŠ¤í‹±ì— ì˜ì¡´í•˜ì—¬ íƒìƒ‰í•˜ëŠ” A*ì™€ ìœ ì‚¬í•œ ì ‘ê·¼ ë°©ì‹ì„ ê°€ì§‘ë‹ˆë‹¤.
     
    drawpath(map_upscaled, path_np, scale, RED, thickness=(scale // 2))

    # 5. ìµœì¢… ê²°ê³¼ í‘œì‹œ
    cv2.imshow("Greedy Best-First Path on Upscaled Maze Map", map_upscaled)
    
else:
    print("ê²½ë¡œë¥¼ ì°¾ì§€ ëª»í–ˆìœ¼ë¯€ë¡œ ì‹œê°í™”í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")


cv2.waitKey(0)
cv2.destroyAllWindows()